# VK Likes Analisy

## Описание
Консольное приложение, предназначенное для сбора данных о пользователях социальной сети **VKontakte**, отрегагировавших на пост в открытом сообществе, с помощью `API VK`, которые в дальнейшем представляются в виде круговой диаграммы.

## Принцип работы программы
Точкой входа в программу является файл `main.py`, расположенный в папке `src`. 

Программа принимает на вход ссылку на пост группы VKontakte в формате `https://vk.com/feed?w=wall-30684458_17815235`

Программа отправляет GET запрос по адресу `https://api.vk.com/method/likes.getList`, получая список пользователей, отреагировавших на пост.
В параметрах запроса передаётся:
  * API ключ
  * Версия
  * И др.

Возвращается ответ в формате JSON, из которого забираются ID пользователей.

Вторым шагом так же отправляется GET запрос, но уже по адресу `https://api.vk.com/method/users.get`, получая все указанные в параметрах данные о пользователе.
В параметрах передаётся:
  * API ключ
  * Версия
  * ID пользователей
  * Интересующие поля *(по умолчанию - город, страна, пол, дата рождения)*

Все полученные данные записываются в таблицу *user* в базе данных `PostgreSQL`.

PostgreSQL и PGAdmin поднимаются в файле `docker-compose.yml`

## Пошаговый запуск программы
  * В командной строке прописать `pip install -r requirements.txt`
  * Создать файл .env, в котором прописать следующие переменные:
    * `SERVICE_KEY`
    * `VERSION`
    * `DB_USER`
    * `DB_PASS`
    * `DB_HOST`
    * `DB_PORT`
    * `DB_NAME`
    * `PGADMIN_EMAIL`
    * `PGADMIN_PASS`
  * Запустить Docker Desktop, после чего в командной строке, предварительно зайдя в папку с `docker-compose.yml` файлом, выполнить команду `docker compose up -d`
  * Для создания БД, Миграций и таблиц в командной строке прописать следующий команды:
    * `alembic revision --autogenerate -m "Some message"`
    * `alembic upgrade head`
  * Запустить файл `main.py` из папки `src`
  * Ввести в командную строку ссылку на пост VK.

## Результат работы программы
<img src='https://sun9-60.userapi.com/impg/xxFJXwHp1LjAf_uawcK6vQ463rInrZHfTnQC0w/JnU7cqu7twI.jpg?size=1654x1644&quality=96&sign=c7f2d7f314d7476d8148eac1cb27c0a2&type=album'>
